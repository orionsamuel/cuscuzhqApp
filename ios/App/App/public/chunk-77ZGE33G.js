import{d as e,f as i,g as m,i as l,ia as u,ja as d,k as p,zb as b}from"./chunk-SXNL5ZVY.js";import{f as h}from"./chunk-S5EYVFES.js";var f=(()=>{let r=class r{constructor(){this.http=p(d),this.toastController=p(b),this.apiURLEdicao="https://cuscuzhq.alwaysdata.net/inscricao/v1/edicaoatual/",this.options={headers:new u({"Content-Type":"application/json"})}}buscarNotas(t,a){console.log(t),a?this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascospobre/":this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascosplay/";let o=`${this.apiURL}${t}/`;return this.http.get(o).pipe(e(s=>s),i(s=>this.exibirErro(s)))}buscarNotaById(t,a){this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascospobre/";let o=`${this.apiURL}${t}/${a}/`;return this.http.get(o).pipe(e(s=>s),i(s=>this.exibirErro(s)))}atualizarNotas(t,a,o){o?this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascospobre/":this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascosplay/";let s=`${this.apiURL}${a}/${t.id}/`;return this.http.put(s,t,this.options).pipe(e(c=>(console.log("\u2705 Resposta do servidor:",c),c)),i(c=>this.exibirErro(c)))}deletarNota(t,a){this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/notascospobre/";let o=`${this.apiURL}${a}/${t.id}/`;return console.log(o),this.http.delete(o).pipe(e(s=>s),i(s=>this.exibirErro(s)))}exibirErro(t){return h(this,null,function*(){return console.error("Erro ao consultar a API:",t),yield(yield this.toastController.create({message:"Erro ao consultar a API",duration:2e3,color:"danger",position:"middle"})).present(),null})}};r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var j=(()=>{let r=class r{constructor(){this.http=p(d),this.toastController=p(b),this.notasService=p(f),this.listaNotas=[],this.apiURLEdicao="https://cuscuzhq.alwaysdata.net/inscricao/v1/edicaoatual/",this.options={headers:new u({"Content-Type":"application/json"})},this.buscarEdicaoAtual().subscribe(t=>{console.log(t),this.edicao=t.numero,this.buscarNotas(this.edicao)})}buscarParticipante(t,a){console.log(t),a?this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/cospobre/":this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/cosplay/";let o=`${this.apiURL}${t}/`;return this.http.get(o).pipe(e(s=>s),i(s=>this.exibirErro(s)))}buscarParticipanteById(t,a){this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/cospobre/";let o=`${this.apiURL}${t}/${a}/`;return this.http.get(o).pipe(e(s=>s),i(s=>this.exibirErro(s)))}deletarParticipante(t,a){console.log("Lista de notas: ",this.listaNotas);let o=this.listaNotas.find(c=>c.cospobreId===t.id),s=`${this.apiURL}${a}/${t.id}/`;return this.http.delete(s).pipe(m(()=>{o?this.notasService.deletarNota(o,a):console.warn("Nenhuma nota encontrada para o participante:",t.id)}),i(c=>this.exibirErro(c)))}exibirErro(t){return h(this,null,function*(){return console.error("Erro ao consultar a API:",t),yield(yield this.toastController.create({message:"Erro ao consultar a API",duration:2e3,color:"danger",position:"middle"})).present(),null})}buscarNotas(t){return h(this,null,function*(){return new Promise((a,o)=>{console.log("Buscando notas para edi\xE7\xE3o:",t),this.notasService.buscarNotas(t,!0).subscribe({next:s=>{console.log("Notas recebidas do servidor:",s),this.listaNotas=s||[],a()},error:s=>{console.error("Erro ao buscar notas:",s),this.listaNotas=[],o(s)}})})})}buscarEdicaoAtual(){return this.http.get(this.apiURLEdicao).pipe(e(t=>t),i(t=>this.exibirErro(t)))}};r.\u0275fac=function(a){return new(a||r)},r.\u0275prov=l({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();export{f as a,j as b};
