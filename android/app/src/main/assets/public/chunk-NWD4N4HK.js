import{a as ue}from"./chunk-MONBQXQC.js";import{$a as G,A as P,Ab as me,Bb as ge,D as d,Db as pe,E as t,Ea as Q,F as i,G as u,K as v,L as g,M as h,Q as S,R as T,S as y,U as E,V as s,W as _,Wa as W,X as O,Y as z,Ya as H,Z as B,Za as q,_ as D,_a as $,ab as J,ba as V,bb as K,c as k,cb as U,da as F,db as X,ea as L,eb as Y,fb as Z,ga as R,gb as ee,jb as ne,k as f,kb as te,lb as oe,m as x,mb as I,n as b,na as A,nb as ie,ob as re,rb as ae,tb as ce,u as a,ua as j,vb as se,wa as N,x as w,yb as le,zb as de}from"./chunk-SXNL5ZVY.js";import"./chunk-UAS5NDXO.js";import"./chunk-77S4VQ5A.js";import"./chunk-NY5B3PCS.js";import"./chunk-XWEC3AQS.js";import"./chunk-73IIU4GO.js";import"./chunk-U6X5N3E5.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-NMPY7VJP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as M,f as p}from"./chunk-S5EYVFES.js";var he=["refresher"];function _e(c,m){c&1&&(t(0,"div",21),u(1,"ion-spinner",22),t(2,"p"),s(3,"Atualizando..."),i()())}function fe(c,m){if(c&1){let r=v();t(0,"ion-item-sliding")(1,"ion-item",25),g("click",function(){let n=x(r).$implicit,o=h(2);return b(o.abrirModal(n))}),t(2,"ion-label",26)(3,"h2")(4,"strong"),s(5),i()(),t(6,"p"),s(7),i(),t(8,"div",27)(9,"ion-badge",28),s(10),i(),t(11,"ion-badge",28),s(12),i()()()()()}if(c&2){let r=m.$implicit;a(5),_(r.nome),a(2),_(r.email),a(2),d("color",r.presente1?"success":"medium"),a(),O(" Dia 1: ",r.presente1?"\u2705":"\u274C"," "),a(),d("color",r.presente2?"success":"medium"),a(),O(" Dia 2: ",r.presente2?"\u2705":"\u274C"," ")}}function Ce(c,m){if(c&1&&(t(0,"ion-list",23),P(1,fe,13,6,"ion-item-sliding",24),i()),c&2){let r=h();a(),d("ngForOf",r.listaInscritos)("ngForTrackBy",r.trackById)}}function xe(c,m){if(c&1){let r=v();t(0,"ion-content",30)(1,"div",31)(2,"ion-list",32)(3,"ion-item")(4,"h2"),s(5),i(),t(6,"ion-buttons",4)(7,"ion-button",33),g("click",function(){x(r);let n=h(2);return b(n.excluirInscrito())}),u(8,"ion-icon",34),i()()(),t(9,"ion-item"),u(10,"ion-icon",35),t(11,"ion-label"),s(12),i()(),t(13,"ion-item"),u(14,"ion-icon",36),t(15,"ion-label"),s(16),i()(),t(17,"ion-item",37)(18,"div",38)(19,"div",39)(20,"ion-checkbox",40),g("ionChange",function(){x(r);let n=h(2);return b(n.alterarPresenca1())}),i(),t(21,"span",41),s(22,"Dia 1"),i()(),t(23,"div",39)(24,"ion-checkbox",40),g("ionChange",function(){x(r);let n=h(2);return b(n.alterarPresenca2())}),i(),t(25,"span",41),s(26,"Dia 2"),i()()()()()()()}if(c&2){let r=h(2);a(5),_(r.inscritoSelecionado.nome),a(7),_(r.inscritoSelecionado.telefone),a(4),_(r.inscritoSelecionado.email),a(4),d("checked",r.inscritoSelecionado.presente1),a(4),d("checked",r.inscritoSelecionado.presente2)}}function be(c,m){if(c&1&&P(0,xe,27,5,"ion-content",29),c&2){let r=h();d("ngIf",r.inscritoSelecionado)}}var Be=(()=>{let m=class m{constructor(){this.alertController=f(le),this.toastController=f(de),this.router=f(A),this.inscritosService=f(ue),this.cdr=f(V),this.titulo="Inscritos",this.edicao=0,this.listaInscritos=[],this.listaCompleta=[],this.mensagem="",this.tamanho=0,this.showToast=!1,this.toastMessage="",this.isModalOpen=!1,this.inscritoSelecionado=null,this.termoBusca="",this.isLoading=!1,this.temMargem=!1}ngOnInit(){this.carregarEdicaoEInscritos()}ionViewWillEnter(){return p(this,null,function*(){console.log("Tab1 activada, recarregando inscritos..."),this.carregarTodosInscritos()})}carregarEdicaoEInscritos(){return p(this,null,function*(){this.isLoading=!0;try{console.log("Iniciando carregamento da edi\xE7\xE3o e inscritos...");let e=yield this.inscritosService.buscarEdicao().toPromise();this.edicao=e.numero,console.log("Edi\xE7\xE3o carregada:",this.edicao),yield this.carregarTodosInscritos()}catch(e){console.error("Erro ao carregar edi\xE7\xE3o e inscritos:",e),this.mostrarToast("Erro ao carregar dados",!0)}finally{this.isLoading=!1}})}ativarMargin(){this.temMargem=!0}removerMargin(){this.temMargem=!1,console.log("Removeu margin")}carregarTodosInscritos(e=null){return p(this,null,function*(){if(!this.edicao)if(console.log("Edi\xE7\xE3o n\xE3o definida, aguardando..."),this.inscritosService.edicao?.numero)this.edicao=this.inscritosService.edicao.numero,console.log("Edi\xE7\xE3o obtida do servi\xE7o:",this.edicao);else{console.warn("N\xE3o \xE9 poss\xEDvel carregar inscritos: edi\xE7\xE3o indefinida");return}console.log("Carregando inscritos para edi\xE7\xE3o:",this.edicao);try{let n=yield k(this.inscritosService.buscarTodosInscritos());this.listaCompleta=n?[...n]:[],this.listaInscritos=n?[...n]:[],this.tamanho=this.listaInscritos.length,console.log("Lista atualizada com",this.tamanho,"inscritos")}catch(n){console.error("Erro ao carregar inscritos:",n),this.mostrarToast("Erro ao carregar lista de inscritos",!0)}finally{e?.target&&e.target.complete(),setTimeout(()=>{this.removerMargin()},1e3)}})}buscarInscrito(){let e=this.termoBusca?.trim();e?this.inscritosService.buscarInscrito(e).subscribe({next:n=>{this.listaInscritos=n,this.tamanho=n.length},error:n=>{console.error("Erro na busca:",n)}}):this.limparBusca()}abrirModal(e){this.inscritoSelecionado=M({},e),this.isModalOpen=!0}fecharModal(){this.carregarEdicaoEInscritos(),this.isModalOpen=!1,this.inscritoSelecionado=null}alterarPresenca1(){return p(this,null,function*(){if(!this.inscritoSelecionado)return;let e=!this.inscritoSelecionado.presente1;this.mensagem=e?"Deseja colocar participante como presente no Dia 1?":"Deseja colocar participante como ausente no Dia 1?",yield(yield this.alertController.create({header:"Confirmar Altera\xE7\xE3o",message:this.mensagem,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Confirmar",handler:()=>{this.inscritoSelecionado.presente1=e,this.salvarAlteracoes()}}]})).present()})}alterarPresenca2(){return p(this,null,function*(){if(!this.inscritoSelecionado)return;let e=!this.inscritoSelecionado.presente2;this.mensagem=e?"Deseja colocar participante como presente no Dia 2?":"Deseja colocar participante como ausente no Dia 2?",yield(yield this.alertController.create({header:"Confirmar Altera\xE7\xE3o",message:this.mensagem,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Confirmar",handler:()=>{this.inscritoSelecionado.presente2=e,this.salvarAlteracoes()}}]})).present()})}salvarAlteracoes(){this.inscritoSelecionado&&(this.inscritosService.atualizarPresenca(this.inscritoSelecionado).subscribe({next:e=>{console.log("Presen\xE7a atualizada:",e),this.mostrarToast("Presen\xE7a atualizada com sucesso!",!1);let n=this.listaInscritos.findIndex(l=>l.id===this.inscritoSelecionado.id);n!==-1&&(this.listaInscritos[n]=M({},this.inscritoSelecionado));let o=this.listaCompleta.findIndex(l=>l.id===this.inscritoSelecionado.id);o!==-1&&(this.listaCompleta[o]=M({},this.inscritoSelecionado))},error:e=>{console.error("Erro ao atualizar presen\xE7a:",e),this.mostrarToast("Erro ao atualizar presen\xE7a",!0)}}),this.listaCompleta=[...this.listaCompleta],this.listaInscritos=[...this.listaInscritos],this.cdr.detectChanges())}excluirInscrito(){return p(this,null,function*(){if(!this.inscritoSelecionado)return;yield(yield this.alertController.create({header:"Confirmar Exclus\xE3o",message:`Deseja excluir o inscrito ${this.inscritoSelecionado.nome}?`,buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary"},{text:"Excluir",role:"destructive",handler:()=>{this.confirmarExclusao()}}]})).present()})}confirmarExclusao(){return p(this,null,function*(){this.inscritoSelecionado&&this.inscritosService.deletarInscrito(this.inscritoSelecionado).subscribe({next:e=>{console.log("Inscrito exclu\xEDdo:",e),this.mostrarToast("Inscrito exclu\xEDdo com sucesso!",!1),this.fecharModal()},error:e=>{console.error("Erro ao excluir inscrito:",e),this.mostrarToast("Erro ao excluir inscrito",!0)}})})}navegarParaCadastro(){this.router.navigate(["/tabs/tab2"])}mostrarToast(e,n=!1){return p(this,null,function*(){yield(yield this.toastController.create({message:e,duration:2e3,color:n?"danger":"success",position:"bottom"})).present()})}trackById(e,n){return n?.id??e}limparBusca(){this.termoBusca="",this.cdr.detectChanges(),this.carregarTodosInscritos()}};m.\u0275fac=function(n){return new(n||m)},m.\u0275cmp=w({type:m,selectors:[["app-tab1"]],viewQuery:function(n,o){if(n&1&&S(he,5,I),n&2){let l;T(l=y())&&(o.refresher=l.first)}},decls:31,vars:12,consts:[[1,"ion-no-border",3,"translucent"],["color","cuscuz"],[1,"ion-text-left"],[1,"custom-title"],["slot","end"],[1,"cadastrarButton",3,"click"],["name","add-outline"],[1,"search-container"],["placeholder","Buscar","debounce","300",3,"ngModelChange","ionInput","ionClear","ngModel"],["color","cuscuz",3,"fullscreen"],["slot","fixed",3,"ionRefresh","ionPull"],["pullingIcon","arrow-down-outline","refreshingSpinner","crescent","pullingText","Puxe para atualizar","refreshingText","Atualizando..."],[1,"main-content-wrapper"],["class","loading-container ion-padding ion-text-center",4,"ngIf"],["class","inscrito-lista",4,"ngIf"],[1,"no-results","ion-padding",3,"hidden"],["color","light"],[1,"ion-text-center"],["name","search-outline","size","large"],["fill","clear",3,"click"],[3,"ionModalDidDismiss","isOpen","canDismiss"],[1,"loading-container","ion-padding","ion-text-center"],["name","crescent"],[1,"inscrito-lista"],[4,"ngFor","ngForOf","ngForTrackBy"],["lines","full",1,"inscrito-item",3,"click"],[1,"ion-text-wrap"],[1,"presenca-badges"],[3,"color"],["class","modal-content-wrapper",4,"ngIf"],[1,"modal-content-wrapper"],[1,"modal-content"],["lines","full"],["expand","block","color","dark",3,"click"],["name","trash-outline"],["name","call","slot","start"],["name","mail","slot","start"],["lines","none"],["slot","end",1,"checkboxes-column"],[1,"checkbox-row"],[3,"ionChange","checked"],[1,"checkbox-text"]],template:function(n,o){n&1&&(t(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2)(3,"ion-text",3),s(4),i()(),t(5,"ion-buttons",4)(6,"ion-button",5),g("click",function(){return o.navegarParaCadastro()}),u(7,"ion-icon",6),i()()(),t(8,"ion-toolbar")(9,"div",7)(10,"ion-searchbar",8),D("ngModelChange",function(C){return B(o.termoBusca,C)||(o.termoBusca=C),C}),g("ionInput",function(){return o.buscarInscrito()})("ionClear",function(){return o.limparBusca()}),i()()()(),t(11,"ion-content",9)(12,"ion-refresher",10),g("ionRefresh",function(C){return o.carregarTodosInscritos(C)})("ionPull",function(){return o.ativarMargin()}),u(13,"ion-refresher-content",11),i(),t(14,"div",12),P(15,_e,4,0,"div",13)(16,Ce,2,2,"ion-list",14),t(17,"div",15)(18,"ion-card",16)(19,"ion-card-header")(20,"ion-card-title",17),u(21,"ion-icon",18),i(),t(22,"ion-card-subtitle",17),s(23," Nenhum resultado encontrado "),i()(),t(24,"ion-card-content",17)(25,"p"),s(26),i(),t(27,"ion-button",19),g("click",function(){return o.limparBusca()}),s(28,"Limpar busca"),i()()()(),t(29,"ion-modal",20),g("ionModalDidDismiss",function(){return o.fecharModal()}),P(30,be,1,1,"ng-template"),i()()()),n&2&&(d("translucent",!0),a(4),_(o.titulo),a(6),z("ngModel",o.termoBusca),a(),d("fullscreen",!1),a(3),E("com-margem",o.temMargem),a(),d("ngIf",o.isLoading),a(),d("ngIf",o.listaInscritos),a(),d("hidden",!(o.listaInscritos.length===0&&o.termoBusca)),a(9),O('Nenhum inscrito encontrado para "',o.termoBusca,'"'),a(3),d("isOpen",o.isModalOpen)("canDismiss",!0))},dependencies:[R,F,L,Q,j,N,Z,se,ce,Y,pe,oe,ee,te,me,H,G,J,K,U,X,ge,q,W,$,re,ae,I,ie,ne],styles:[".search-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:16px;margin-left:10px;margin-right:10px}.search-container[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{flex:1;padding:0}.custom-title[_ngcontent-%COMP%]{font-size:clamp(1rem,10vw,2rem);font-weight:700;letter-spacing:-2px;margin-top:75px;margin-left:10px;white-space:nowrap;text-overflow:clip;line-height:1;display:inline-block}ion-header[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin-top:75px;margin-right:10px;background:var(--ion-color-light-shade)}ion-header[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:34px;width:34px;color:var(--ion-color-dark)}ion-header[_ngcontent-%COMP%]   .cadastrarButton[_ngcontent-%COMP%]{background:#fff}ion-searchbar[_ngcontent-%COMP%]{--background: var(--ion-color-light-shade);--border-radius: 19px;--box-shadow: 0 2px 6px rgba(0, 0, 0, .1);--color: var(--ion-color-dark);--icon-color: var(--ion-color-dark);--placeholder-color: var(--ion-color-dark);--placeholder-opacity: .8}ion-searchbar[_ngcontent-%COMP%]   .searchbar-input-container[_ngcontent-%COMP%]   .searchbar-input[_ngcontent-%COMP%]{border:2px solid var(--ion-color-primary)!important}.inscrito-lista[_ngcontent-%COMP%]{margin-top:0;padding-top:0}.inscrito-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--min-height: 80px}.inscrito-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]{margin-right:16px}.inscrito-item[_ngcontent-%COMP%]   ion-avatar[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:32px;color:var(--ion-color-medium)}.inscrito-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-weight:600;margin-bottom:4px}.inscrito-item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:2px 0;font-size:.9rem;color:var(--ion-color-medium)}.presenca-badges[_ngcontent-%COMP%]{margin-top:8px}.presenca-badges[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{margin-right:8px;font-size:.8rem}.modal-content[_ngcontent-%COMP%]{padding:20px;text-align:center}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:var(--ion-color-dark);font-size:1.5rem;font-weight:700!important}.modal-actions[_ngcontent-%COMP%]{margin-top:20px;padding:0 16px}ion-list[_ngcontent-%COMP%]{background:#fff}ion-item.inscrito-item[_ngcontent-%COMP%]{margin-left:10px;margin-right:10px;width:90%}ion-card[_ngcontent-%COMP%]{margin:20px}ion-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{color:#758fff}ion-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding:20px}ion-modal[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{border-radius:19px}ion-modal[_ngcontent-%COMP%]{--width: 95%;--max-width: 380px;--height: 20.7rem;--background-color: #fff;--border-radius: 19px !important}ion-modal[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{height:24px;width:24px}.modal-content[_ngcontent-%COMP%]{padding:15px;background:#fff}.modal-content-wrapper[_ngcontent-%COMP%]{--background: var(--ion-background-color, #ffffff) !important}ion-card[_ngcontent-%COMP%]{border-radius:19px!important;background:#fff;margin:10px;padding:15px}ion-content[_ngcontent-%COMP%]{overflow:auto!important;background:#fff}ion-content[_ngcontent-%COMP%]   .inner-scroll[_ngcontent-%COMP%]{overflow-y:auto!important;will-change:transform}.center[_ngcontent-%COMP%]{padding-top:10px;margin-top:10px;background:#fff}ion-refresher[_ngcontent-%COMP%]{z-index:10!important;background:#fff}.checkboxes-column[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;align-items:flex-start;margin:8px 0}.checkbox-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.checkbox-row[_ngcontent-%COMP%]   ion-checkbox[_ngcontent-%COMP%]{--size: 20px;--border-width: 2px;--border-color: var(--ion-color-medium);--border-color-checked: var(--ion-color-primary);--background-checked: var(--ion-color-primary);order:1;margin:0}.checkbox-row[_ngcontent-%COMP%]   .checkbox-text[_ngcontent-%COMP%]{order:2;font-size:.9rem;color:var(--ion-color-dark);white-space:nowrap}.checkbox-row[_ngcontent-%COMP%]   ion-checkbox[checked][_ngcontent-%COMP%] ~ .checkbox-text[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:500}ion-item[_ngcontent-%COMP%]   .checkboxes-column[_ngcontent-%COMP%]{margin-left:0;text-align:left;width:100%}.main-content-wrapper[_ngcontent-%COMP%]{transition:margin-top .3s ease;position:relative;min-height:100%}.main-content-wrapper.com-margem[_ngcontent-%COMP%]{margin-top:45px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;z-index:10;justify-content:center;padding:40px;text-align:center}.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:40px;height:40px;margin-bottom:16px;--color: var(--ion-color-cuscuz-preto)}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:0}@media (prefers-color-scheme: dark){.loading-container[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{--color: white}ion-card[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)}ion-card-subtitle[_ngcontent-%COMP%]{color:#fff!important}ion-title[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)}ion-header[_ngcontent-%COMP%]   .cadastrarButton[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)}.search-container[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}.search-container[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{flex:1;padding:0}ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-color-cuscuz-preto);--color: white}ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-cuscuz-preto) !important;background:var(--ion-color-cuscuz-preto)!important}ion-modal[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background: var(--ion-color-cuscuz-preto) !important}.modal-content[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}.modal-content[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--background:var(--ion-color-cuscuz-preto) !important}.modal-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   .checkbox-text[_ngcontent-%COMP%]{color:#fff}.center[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}ion-item.inscrito-item[_ngcontent-%COMP%]{--background:var(--ion-color-cuscuz-preto) !important;--color: white}ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-light)!important}ion-label[_ngcontent-%COMP%]{color:var(--ion-color-light)!important}ion-input[_ngcontent-%COMP%]{--color: white;--placeholder-color: rgba(255, 255, 255, .6)}ion-button[_ngcontent-%COMP%]{--border-color: var(--ion-color-light) !important;--color: var(--ion-color-light)}ion-button[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light);--color: var(--ion-color-dark)}ion-list[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}p[_ngcontent-%COMP%]{color:#fff!important}ion-refresher[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}body[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}}"]});let c=m;return c})();export{Be as Tab1Page};
