import{a as h,d as s,f as a,i as p,ia as d,ja as u,k as c,zb as l}from"./chunk-SXNL5ZVY.js";import{f as n}from"./chunk-S5EYVFES.js";var I=(()=>{let o=class o{constructor(){this.http=c(u),this.toastController=c(l),this.apiURL="https://cuscuzhq.alwaysdata.net/inscricao/v1/participantes/",this.apiURLEdicao="https://cuscuzhq.alwaysdata.net/inscricao/v1/edicaoatual/",this.options={headers:new d({"Content-Type":"application/json"})},this.inscritoCadastradoSource=new h,this.inscritoCadastrado$=this.inscritoCadastradoSource.asObservable(),this.buscarEdicao().subscribe(t=>{console.log(t),this.edicao=t.numero})}buscarInscrito(t){let i=`${this.apiURL}${this.edicao}/buscar/${t}`;return this.http.get(`${i}`).pipe(s(r=>r),a(r=>this.exibirErro(r)))}buscarTodosInscritos(){let t=`${this.apiURL}${this.edicao}/`;return this.http.get(t).pipe(s(i=>i),a(i=>this.exibirErro(i)))}cadastrarInscrito(t){console.log("Inscrito cadastrado dento do service: ",t);let i=`${this.apiURL}${this.edicao}`;return this.http.post(`${i}/`,JSON.stringify(t),this.options).pipe(s(r=>(this.notificarInscritoCadastrado(),r)),a(r=>this.exibirErro(r)))}atualizarPresenca(t){let i=`${this.apiURL}${this.edicao}/${t.id}`;return this.http.put(`${i}/`,JSON.stringify(t),this.options).pipe(s(r=>r),a(r=>this.exibirErro(r)))}deletarInscrito(t){let i=`${this.apiURL}${this.edicao}/${t.id}`;return this.http.delete(`${i}/`).pipe(s(r=>r),a(r=>this.exibirErro(r)))}buscarEdicao(){let t=`${this.apiURLEdicao}`;return this.http.get(`${t}`).pipe(s(i=>i),a(i=>this.exibirErro(i)))}exibirErro(t){return n(this,null,function*(){return(yield this.toastController.create({message:"Erro ao consultar a API",duration:2e3,color:"danger",position:"middle"})).present(),null})}notificarInscritoCadastrado(){console.log("Emitindo evento de inscrito cadastrado"),this.inscritoCadastradoSource.next()}};o.\u0275fac=function(i){return new(i||o)},o.\u0275prov=p({token:o,factory:o.\u0275fac,providedIn:"root"});let e=o;return e})();export{I as a};
