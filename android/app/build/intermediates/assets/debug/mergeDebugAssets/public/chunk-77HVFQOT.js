import{a as J}from"./chunk-MONBQXQC.js";import{A as m,Bb as K,Ca as N,Cb as U,D as s,Da as F,E as i,Ea as V,F as o,Fa as q,G as p,K as v,L as g,M as u,U as w,V as d,W as O,X as M,ea as T,eb as L,fb as B,ga as S,gb as H,k as _,kb as G,m as h,n as b,na as k,ob as j,rb as R,t as x,ta as f,tb as Y,u as r,ua as y,ub as $,va as E,vb as A,x as P,xa as I,ya as D,za as z}from"./chunk-SXNL5ZVY.js";import"./chunk-UAS5NDXO.js";import"./chunk-77S4VQ5A.js";import"./chunk-NY5B3PCS.js";import"./chunk-XWEC3AQS.js";import"./chunk-73IIU4GO.js";import"./chunk-U6X5N3E5.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-NMPY7VJP.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-S5EYVFES.js";function W(e,a){e&1&&p(0,"ion-spinner",27)}function X(e,a){if(e&1){let l=v();i(0,"span",28),g("click",function(){h(l);let c=u();return b(c.cadastro())}),d(1," Cadastrar "),o()}}function Z(e,a){e&1&&(i(0,"small"),d(1,"Nome \xE9 obrigat\xF3rio"),o())}function ee(e,a){e&1&&(i(0,"small"),d(1,"Nome deve ter pelo menos 2 caracteres"),o())}function te(e,a){if(e&1&&(i(0,"ion-item",29)(1,"ion-text",30),m(2,Z,2,0,"small",31)(3,ee,2,0,"small",31),o()()),e&2){let l=u();r(2),s("ngIf",l.errorControl.nome.errors==null?null:l.errorControl.nome.errors.required),r(),s("ngIf",l.errorControl.nome.errors==null?null:l.errorControl.nome.errors.minlength)}}function oe(e,a){e&1&&(i(0,"small"),d(1,"Telefone \xE9 obrigat\xF3rio"),o())}function ne(e,a){e&1&&(i(0,"small"),d(1,"Digite exatamente 11 n\xFAmeros (com DDD)"),o())}function ie(e,a){if(e&1&&(i(0,"ion-item",29)(1,"ion-text",30),m(2,oe,2,0,"small",31)(3,ne,2,0,"small",31),o()()),e&2){let l=u();r(2),s("ngIf",l.errorControl.telefone.errors==null?null:l.errorControl.telefone.errors.required),r(),s("ngIf",l.errorControl.telefone.errors==null?null:l.errorControl.telefone.errors.pattern)}}function re(e,a){e&1&&(i(0,"small"),d(1,"Email \xE9 obrigat\xF3rio"),o())}function ae(e,a){e&1&&(i(0,"small"),d(1,"Digite um email v\xE1lido"),o())}function le(e,a){if(e&1&&(i(0,"ion-item",29)(1,"ion-text",30),m(2,re,2,0,"small",31)(3,ae,2,0,"small",31),o()()),e&2){let l=u();r(2),s("ngIf",l.errorControl.email.errors==null?null:l.errorControl.email.errors.required),r(),s("ngIf",l.errorControl.email.errors==null?null:l.errorControl.email.errors.pattern)}}function se(e,a){if(e&1){let l=v();i(0,"div",32)(1,"div",33),g("click",function(){h(l);let c=u();return b(c.selectOption("dia1"))}),d(2," Dia 1 "),o(),i(3,"div",33),g("click",function(){h(l);let c=u();return b(c.selectOption("dia2"))}),d(4," Dia 2 "),o()()}}function ce(e,a){e&1&&(i(0,"ion-item",29)(1,"ion-text",30)(2,"small"),d(3,"Selecione um dia"),o()()())}var xe=(()=>{let a=class a{constructor(){this.formBuilder=_(F),this.inscritosService=_(J),this.router=_(k),this.titulo="Novo participante",this.isSubmitted=!1,this.showToast=!1,this.toastMessage="",this.toastColor="success",this.inscrito={},this.diaSelecionado="",this.isLoading=!1,this.isDropdownOpen=!1,this.formCadastro=this.formBuilder.group({nome:["",[f.required,f.minLength(2)]],telefone:["",[f.required,f.pattern("^[0-9]{11}$")]],email:["",[f.required,f.pattern("[a-z0-9._%+-]+@[a-z0-9.-]+.[a-z]{2,3}$")]]})}get errorControl(){return this.formCadastro.controls}ngOnInit(){}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}selectOption(n){console.log("Op\xE7\xE3o selecionada:",n),this.diaSelecionado=n,this.formCadastro.patchValue({diaSelecionado:n}),this.isDropdownOpen=!1,this.inscrito.presente1=n==="dia1",this.inscrito.presente2=n==="dia2"}onDocumentClick(n){if(this.isDropdownOpen){let c=document.querySelector(".custom-dropdown"),t=n.target;console.log("Clicou fora?",!c?.contains(t)),c&&!c.contains(t)&&(this.isDropdownOpen=!1,console.log("Dropdown fechado"))}}cadastro(){if(this.isSubmitted=!0,this.isLoading=!0,!this.diaSelecionado){this.isLoading=!1,this.presentToast("Selecione um dia","danger");return}if(!this.formCadastro.valid){this.isLoading=!1,console.log("Formul\xE1rio inv\xE1lido"),this.presentToast("Por favor, preencha o formul\xE1rio corretamente","danger");return}this.inscrito.nome=this.formCadastro.value.nome,this.inscrito.telefone=this.formCadastro.value.telefone,this.inscrito.email=this.formCadastro.value.email,this.inscrito.edicao=this.inscritosService.edicao.id||1,this.inscrito.presente1=this.diaSelecionado==="dia1",this.inscrito.presente2=this.diaSelecionado==="dia2",this.inscrito.sorteado=!1,console.log("Dados do inscrito:",this.inscrito),this.inscritosService.cadastrarInscrito(this.inscrito).subscribe({next:n=>{console.log("Cadastro realizado:",n),this.presentToast("Cadastrado com sucesso!","success"),setTimeout(()=>{this.formCadastro.reset(),this.diaSelecionado="",this.isSubmitted=!1,this.isLoading=!1,this.router.navigate(["/tabs/tab1"])},2100)},error:n=>{console.error("Erro no cadastro:",n),this.presentToast("Erro ao cadastrar. Tente novamente.","danger")}})}presentToast(n,c){this.toastMessage=n,this.toastColor=c,this.showToast=!0,console.log("Caiu no toast")}handleKeydown(n){(n.key==="Enter"||n.key===" ")&&(n.preventDefault(),this.toggleDropdown()),n.key==="Escape"&&(this.isDropdownOpen=!1)}};a.\u0275fac=function(c){return new(c||a)},a.\u0275cmp=P({type:a,selectors:[["app-tab2"]],hostBindings:function(c,t){c&1&&g("click",function(Q){return t.onDocumentClick(Q)},x)},decls:40,vars:19,consts:[[1,"ion-no-border",3,"translucent"],["color","cuscuz"],[1,"ion-text-left"],[1,"custom-title"],["slot","end",1,"cadastrar-container"],["name","crescent","class","spinner",4,"ngIf"],["class","cadastrar-text",3,"click",4,"ngIf"],["color","cuscuz",1,"",3,"fullscreen"],[1,"center"],["novalidate","",3,"ngSubmit","formGroup"],["lines","full"],["position","floating"],["name","person","slot","start"],["clear-input","true","required","","type","text","formControlName","nome"],["lines","none",4,"ngIf"],["name","call","slot","start"],["clear-input","true","required","","type","tel","formControlName","telefone"],["name","mail","slot","start"],["clear-input","true","required","","type","email","formControlName","email"],["lines","none",1,"custom-dropdown-container"],["position","stacked"],[1,"custom-dropdown"],[1,"dropdown-selected",3,"click"],[1,"selected-text"],[1,"dropdown-icon",3,"name"],["class","dropdown-options",4,"ngIf"],[3,"didDismiss","isOpen","message","color","duration"],["name","crescent",1,"spinner"],[1,"cadastrar-text",3,"click"],["lines","none"],["color","danger"],[4,"ngIf"],[1,"dropdown-options"],[1,"dropdown-option",3,"click"]],template:function(c,t){c&1&&(i(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-title",2)(3,"ion-text",3),d(4),o()(),i(5,"div",4),m(6,W,1,0,"ion-spinner",5)(7,X,2,0,"span",6),o()()(),i(8,"ion-content",7)(9,"div",8)(10,"form",9),g("ngSubmit",function(){return t.cadastro()}),i(11,"ion-item",10)(12,"ion-label",11),p(13,"ion-icon",12),d(14," Nome "),o(),p(15,"ion-input",13),o(),m(16,te,4,2,"ion-item",14),i(17,"ion-item",10)(18,"ion-label",11),p(19,"ion-icon",15),d(20," Telefone "),o(),p(21,"ion-input",16),o(),m(22,ie,4,2,"ion-item",14),i(23,"ion-item",10)(24,"ion-label",11),p(25,"ion-icon",17),d(26," E-mail "),o(),p(27,"ion-input",18),o(),m(28,le,4,2,"ion-item",14),i(29,"ion-item",19)(30,"ion-label",20),d(31,"Dia de cadastro:"),o(),i(32,"div",21)(33,"div",22),g("click",function(){return t.toggleDropdown()}),i(34,"span",23),d(35),o(),p(36,"ion-icon",24),o(),m(37,se,5,0,"div",25),o()(),m(38,ce,4,0,"ion-item",14),o()(),i(39,"ion-toast",26),g("didDismiss",function(){return t.showToast=!1}),o()()),c&2&&(s("translucent",!0),r(4),O(t.titulo),r(2),s("ngIf",t.isLoading),r(),s("ngIf",!t.isLoading),r(),s("fullscreen",!1),r(2),s("formGroup",t.formCadastro),r(6),s("ngIf",t.errorControl.nome.invalid&&t.isSubmitted),r(6),s("ngIf",t.errorControl.telefone.invalid&&t.isSubmitted),r(6),s("ngIf",t.errorControl.email.invalid&&t.isSubmitted),r(4),w("open",t.isDropdownOpen),r(3),M(" ",t.diaSelecionado?t.diaSelecionado==="dia1"?"Dia 1":"Dia 2":"Selecione"," "),r(),s("name",t.isDropdownOpen?"chevron-up":"chevron-down"),r(),s("ngIf",t.isDropdownOpen),r(),s("ngIf",t.isSubmitted&&!t.diaSelecionado),r(),s("isOpen",t.showToast)("message",t.toastMessage)("color",t.toastColor)("duration",2e3))},dependencies:[S,T,V,I,y,E,N,q,D,z,B,A,Y,L,H,G,U,$,K,R,j],styles:['@charset "UTF-8";.cadastrar-container[_ngcontent-%COMP%]{margin-top:75px}.center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:top;min-height:80vh;padding:20px}ion-content[_ngcontent-%COMP%]{--padding-bottom: 0 !important;--offset-bottom: 0 !important}form[_ngcontent-%COMP%]{width:100%;height:50%;background:#fffc;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-radius:16px;padding:20px;box-shadow:0 4px 20px #0000001a}.custom-title[_ngcontent-%COMP%]{font-size:clamp(1rem,7vw,2rem);font-weight:700;letter-spacing:-2px;margin-top:75px;margin-left:10px;white-space:nowrap;text-overflow:clip;line-height:1;display:inline-block}ion-item[_ngcontent-%COMP%]{--background: transparent;--border-color: rgba(0, 0, 0, .2);--color: black;margin-bottom:16px}ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin-right:8px}ion-label[_ngcontent-%COMP%]{color:var(--ion-color-dark)!important}ion-input[_ngcontent-%COMP%]{--color: black;--placeholder-color: rgba(0, 0, 0, .6)}ion-button[_ngcontent-%COMP%]{--border-width: 2px;--border-style: solid;--border-color: var(--ion-color-dark);--color: var(--ion-color-dark);font-weight:700;margin-top:24px}ion-button[_ngcontent-%COMP%]:hover{--background: var(--ion-color-dark) !important;--color: var(--ion-color-light) !important}@media (prefers-color-scheme: dark){form[_ngcontent-%COMP%], .center[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)}ion-title[_ngcontent-%COMP%]{color:#fff}ion-header[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)}ion-content[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}ion-item[_ngcontent-%COMP%]{--border-color: rgba(255, 255, 255, .2);--color: white}ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-light)!important}ion-label[_ngcontent-%COMP%]{color:var(--ion-color-light)!important}ion-input[_ngcontent-%COMP%]{--color: white;--placeholder-color: rgba(255, 255, 255, .6)}ion-button[_ngcontent-%COMP%]{--border-color: var(--ion-color-light);--color: var(--ion-color-light)}ion-button[_ngcontent-%COMP%]:hover{--background: var(--ion-color-light);--color: var(--ion-color-dark)}.custom-dropdown[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}span.selected-text[_ngcontent-%COMP%]{color:#fff!important}.dropdown-option[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important;color:#fff!important;border-bottom:1px solid var(--ion-color-dark-tint)!important}.dropdown-option[_ngcontent-%COMP%]:last-child{border-bottom:none!important}.inner-scroll[_ngcontent-%COMP%]   scroll-y[_ngcontent-%COMP%]{background:var(--ion-color-cuscuz-preto)!important}}.cadastrar-container[_ngcontent-%COMP%]{display:flex;align-items:center;height:44px;padding:0 16px}.cadastrar-container[_ngcontent-%COMP%]   .cadastrar-text[_ngcontent-%COMP%]{color:#758fff;font-size:20px;font-weight:500;cursor:pointer;line-height:44px;height:44px;padding:0 8px}.cadastrar-container[_ngcontent-%COMP%]   .cadastrar-text[_ngcontent-%COMP%]:hover:not(.disabled){color:var(--ion-color-primary)}.cadastrar-container[_ngcontent-%COMP%]   .cadastrar-text.disabled[_ngcontent-%COMP%]{color:#ffffff80;cursor:not-allowed;opacity:.6}.cadastrar-container[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:20px;height:20px;--color: white;margin-right:8px}.custom-dropdown-container[_ngcontent-%COMP%]{--padding-start: 0 !important;--inner-padding-end: 0 !important;margin:16px 0;position:relative;z-index:1000}.custom-dropdown-container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:500;font-size:.9rem;margin-bottom:8px}.custom-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;border-radius:8px;background:#fff;cursor:pointer}.custom-dropdown.open[_ngcontent-%COMP%]{border-color:var(--ion-color-primary);z-index:1001}.dropdown-selected[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;min-height:44px}.dropdown-selected[_ngcontent-%COMP%]   .selected-text[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-size:1rem}.dropdown-selected[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:1.2rem}.dropdown-options[_ngcontent-%COMP%]{position:absolute;top:100%!important;left:-1px!important;right:-1px!important;background:#fff;border-top:none;border-radius:0 0 8px 8px;box-shadow:0 4px 12px #00000026;z-index:1002!important;display:block!important;visibility:visible!important;opacity:1!important;height:auto!important;min-height:90px;overflow:visible!important}.dropdown-option[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px 16px;color:var(--ion-color-dark);font-size:1rem;border-bottom:1px solid var(--ion-color-light);cursor:pointer;height:45px;box-sizing:border-box}.dropdown-option[_ngcontent-%COMP%]:last-child{border-bottom:none}.dropdown-option[_ngcontent-%COMP%]:hover{background:var(--ion-color-light)}ion-content[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%], .form-container[_ngcontent-%COMP%]{overflow:visible!important}.custom-dropdown[_ngcontent-%COMP%]{overflow:visible!important}ion-modal[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%], ion-list[_ngcontent-%COMP%]{contain:none!important;overflow:visible!important}@keyframes _ngcontent-%COMP%_dropdownSlide{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}']});let e=a;return e})();export{xe as Tab2Page};
